import{Q as Ve,R as _,P as pe,A as ne,T as Ue,t as ce,$ as Te,G as ze,i as L,U as Ne,V as ie,D as m,E as f,L as a,Y as P,ac as st,ah as at,Z as oe,X as O,a0 as q,O as w,a2 as E,r as D,a9 as ve,a1 as re,I as W,ai as xe,B as de,c as rt,aj as nt,a5 as lt,a6 as Be,n as C,ak as it,al as dt,S as je,am as ut,a3 as ue,M as r,an as Oe,k as ee,w as Fe,W as ct,K as b,_ as We,J as be,h as ae,ab as pt,ag as ft}from"./DIdX6-tg.js";import{c as De,g as mt,_ as Me,e as qe,b as gt,d as wt,N as vt}from"./oKCyEVGW.js";const bt={wrapper:"",inner:"",label:{wrapper:"flex content-center items-center justify-between",base:"block font-medium text-gray-700 dark:text-gray-200",required:"after:content-['*'] after:ms-0.5 after:text-red-500 dark:after:text-red-400"},size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},container:"mt-1 relative",description:"text-gray-500 dark:text-gray-400",hint:"text-gray-500 dark:text-gray-400",help:"mt-2 text-gray-500 dark:text-gray-400",error:"mt-2 text-red-500 dark:text-red-400",default:{size:"sm"}},yt={wrapper:"relative flex items-start",container:"flex items-center h-5",base:"h-4 w-4 dark:checked:bg-current dark:checked:border-transparent disabled:opacity-50 disabled:cursor-not-allowed focus:ring-0 focus:ring-transparent focus:ring-offset-transparent",form:"form-radio",color:"text-{color}-500 dark:text-{color}-400",background:"bg-white dark:bg-gray-900",border:"border border-gray-300 dark:border-gray-700",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",inner:"ms-3 flex flex-col",label:"text-sm font-medium text-gray-700 dark:text-gray-200",required:"text-sm text-red-500 dark:text-red-400",help:"text-sm text-gray-500 dark:text-gray-400",default:{color:"primary"}},Se=Ve(_.ui.strategy,_.ui.radio,yt),ht=ne({inheritAttrs:!1,props:{id:{type:String,default:null},value:{type:[String,Number,Boolean],default:null},modelValue:{type:[String,Number,Boolean,Object],default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},help:{type:String,default:null},label:{type:String,default:null},required:{type:Boolean,default:!1},color:{type:String,default:()=>Se.default.color,validator(e){return _.ui.colors.includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:i}){const{ui:d,attrs:g}=Ue("radio",ce(e,"ui"),Se,ce(e,"class")),s=e.id??Te(),n=ze("radio-group",null),{emitFormChange:y,color:h,name:$}=n??De(e,Se),k=L({get(){return e.modelValue},set(p){i("update:modelValue",p),n||y()}});function z(p){i("change",p.target.value)}const V=L(()=>Ne(ie(d.value.base,d.value.form,d.value.background,d.value.border,h.value&&d.value.ring.replaceAll("{color}",h.value),h.value&&d.value.color.replaceAll("{color}",h.value)),e.inputClass));return{inputId:s,ui:d,attrs:g,pick:k,name:$,inputClass:V,onChange:z}}}),kt=["data-n-ids"],$t=["id","name","required","value","disabled"],St=["for"];function Ct(e,i,d,g,s,n){return f(),m("div",{class:O(e.ui.wrapper),"data-n-ids":e.attrs["data-n-ids"]},[a("div",{class:O(e.ui.container)},[st(a("input",oe({id:e.inputId,"onUpdate:modelValue":i[0]||(i[0]=y=>e.pick=y),name:e.name,required:e.required,value:e.value,disabled:e.disabled,type:"radio",class:e.inputClass},e.attrs,{onChange:i[1]||(i[1]=(...y)=>e.onChange&&e.onChange(...y))}),null,16,$t),[[at,e.pick]])],2),e.label||e.$slots.label?(f(),m("div",{key:0,class:O(e.ui.inner)},[a("label",{for:e.inputId,class:O(e.ui.label)},[q(e.$slots,"label",{label:e.label},()=>[w(E(e.label),1)]),e.required?(f(),m("span",{key:0,class:O(e.ui.required)},"*",2)):P("",!0)],10,St),e.help||e.$slots.help?(f(),m("p",{key:0,class:O(e.ui.help)},[q(e.$slots,"help",{help:e.help},()=>[w(E(e.help),1)])],2)):P("",!0)],2)):P("",!0)],10,kt)}const Vt=pe(ht,[["render",Ct]]),Ce=Ve(_.ui.strategy,_.ui.formGroup,bt),Ut=ne({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(Ce.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},eagerValidation:{type:Boolean,default:!1}},setup(e){const{ui:i,attrs:d}=Ue("formGroup",ce(e,"ui"),Ce,ce(e,"class")),g=ze("form-errors",null),s=L(()=>{var h,$;return e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:($=(h=g==null?void 0:g.value)==null?void 0:h.find(k=>k.path===e.name))==null?void 0:$.message}),n=L(()=>i.value.size[e.size??Ce.default.size]),y=D(Te());return ve("form-group",{error:s,inputId:y,name:L(()=>e.name),size:L(()=>e.size),eagerValidation:L(()=>e.eagerValidation)}),{ui:i,attrs:d,inputId:y,size:n,error:s}}}),Tt=["for"];function jt(e,i,d,g,s,n){return f(),m("div",oe({class:e.ui.wrapper},e.attrs),[a("div",{class:O(e.ui.inner)},[e.label||e.$slots.label?(f(),m("div",{key:0,class:O([e.ui.label.wrapper,e.size])},[a("label",{for:e.inputId,class:O([e.ui.label.base,e.required?e.ui.label.required:""])},[e.$slots.label?q(e.$slots,"label",re(oe({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(f(),m(W,{key:1},[w(E(e.label),1)],64))],10,Tt),e.hint||e.$slots.hint?(f(),m("span",{key:0,class:O([e.ui.hint])},[e.$slots.hint?q(e.$slots,"hint",re(oe({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(f(),m(W,{key:1},[w(E(e.hint),1)],64))],2)):P("",!0)],2)):P("",!0),e.description||e.$slots.description?(f(),m("p",{key:1,class:O([e.ui.description,e.size])},[e.$slots.description?q(e.$slots,"description",re(oe({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(f(),m(W,{key:1},[w(E(e.description),1)],64))],2)):P("",!0)],2),a("div",{class:O([e.label?e.ui.container:""])},[q(e.$slots,"default",re(xe({error:e.error}))),typeof e.error=="string"&&e.error?(f(),m("p",{key:0,class:O([e.ui.error,e.size])},[e.$slots.error?q(e.$slots,"error",re(oe({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(f(),m(W,{key:1},[w(E(e.error),1)],64))],2)):e.help||e.$slots.help?(f(),m("p",{key:1,class:O([e.ui.help,e.size])},[e.$slots.help?q(e.$slots,"help",re(oe({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(f(),m(W,{key:1},[w(E(e.help),1)],64))],2)):P("",!0)],2)],16)}const Et=pe(Ut,[["render",jt]]);class ye extends Error{constructor(i){super(i),this.message=i,Object.setPrototypeOf(this,ye.prototype)}}const At=ne({props:{schema:{type:[Object,Function],default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:i,emit:d}){const g=Te(),s=mt(`form-${g}`),n=D(null);de(()=>{s.on(async V=>{var p;V.type!=="submit"&&((p=e.validateOn)!=null&&p.includes(V.type))&&await k(V.path,{silent:!0})})}),rt(()=>{s.reset()});const y=D([]);ve("form-errors",y),ve("form-events",s);const h=D({});ve("form-inputs",h);async function $(){let V=await e.validate(e.state);if(e.schema){const{errors:p,result:t}=await qt(e.state,e.schema);p?V=V.concat(p):n.value=t}return V}async function k(V,p={silent:!1}){let t=V;if(V&&!Array.isArray(V)&&(t=[V]),t){const U=y.value.filter(S=>!t.includes(S.path)),v=(await $()).filter(S=>t.includes(S.path));y.value=U.concat(v)}else y.value=await $();if(y.value.length>0){if(p.silent)return!1;throw new ye(`Form validation failed: ${JSON.stringify(y.value,null,2)}`)}return e.state}async function z(V){var t;const p=V;try{(t=e.validateOn)!=null&&t.includes("submit")&&await k(),p.data=e.schema?n.value:e.state,d("submit",p)}catch(U){if(!(U instanceof ye))throw U;const v={...p,errors:y.value.map(S=>({...S,id:h.value[S.path]}))};d("error",v)}}return i({validate:k,errors:y,setErrors(V,p){p?y.value=y.value.filter(t=>t.path!==p).concat(V):y.value=V},async submit(){await z(new Event("submit"))},getErrors(V){return V?y.value.filter(p=>p.path===V):y.value},clear(V){V?y.value=y.value.filter(p=>p.path!==V):y.value=[]}}),{onSubmit:z,errors:nt(y)}}});function It(e){return e.validate&&e.__isYupSchema__}function Ht(e){return e.inner!==void 0}function Lt(e){return"schema"in e&&typeof e.coercer=="function"&&typeof e.validator=="function"&&typeof e.refiner=="function"}function Pt(e){return e.validateAsync!==void 0&&e.id!==void 0}function Rt(e){return e.isJoi===!0}function Ot(e){return"_parse"in e||"_run"in e||typeof e=="function"&&"schema"in e}function zt(e){return e.parse!==void 0}function Nt(e){return"~standard"in e}async function xt(e,i){const d=await i["~standard"].validate(e);return!d.issues||d.issues.length===0?{errors:null,result:"value"in d?d.value:null}:{errors:d.issues.map(s=>{var n;return{path:((n=s.path)==null?void 0:n.map(y=>typeof y=="object"?y.key:y).join("."))||"",message:s.message}}),result:null}}async function Bt(e,i){const d=await("_parse"in i?i._parse(e):"_run"in i?i._run({typed:!1,value:e},{}):i(e));return!d.issues||d.issues.length===0?{errors:null,result:"output"in d?d.output:"value"in d?d.value:null}:{errors:d.issues.map(s=>{var n;return{path:((n=s.path)==null?void 0:n.map(y=>y.key).join("."))||"",message:s.message}}),result:null}}async function Ft(e,i){try{return{errors:null,result:await i.validateAsync(e,{abortEarly:!1})}}catch(d){if(Rt(d))return{errors:d.details.map(s=>({path:s.path.join("."),message:s.message})),result:null};throw d}}async function Wt(e,i){const d=await i.safeParseAsync(e);return d.success===!1?{errors:d.error.issues.map(s=>({path:s.path.join("."),message:s.message})),result:null}:{result:d.data,errors:null}}async function Dt(e,i){const[d,g]=i.validate(e);return d?{errors:d.failures().map(n=>({message:n.message,path:n.path.join(".")})),result:null}:{errors:null,result:g}}async function Mt(e,i){try{return{errors:null,result:await i.validate(e,{abortEarly:!1})}}catch(d){if(Ht(d))return{errors:d.inner.map(s=>({path:s.path??"",message:s.message})),result:null};throw d}}function qt(e,i){if(Nt(i))return xt(e,i);if(zt(i))return Wt(e,i);if(Pt(i))return Ft(e,i);if(Ot(i))return Bt(e,i);if(It(i))return Mt(e,i);if(Lt(i))return Dt(e,i);throw new Error("Form validation failed: Unsupported form schema")}function Kt(e,i,d,g,s,n){return f(),m("form",{onSubmit:i[0]||(i[0]=lt((...y)=>e.onSubmit&&e.onSubmit(...y),["prevent"]))},[q(e.$slots,"default",re(xe({errors:e.errors})))],32)}const Jt=pe(At,[["render",Kt]]),Gt=()=>{const e=Be(),i=C(),d=it(),g=async()=>{const $=await e.getStatus();return $&&e.setUserStatus($),$},s=async $=>{await e.register($)&&i.add({title:"æ³¨å†ŒæˆåŠŸ",description:"æ¬¢è¿ä½¿ç”¨ï¼è¯·ç™»å½•",icon:"i-fluent-checkmark-starburst-16-filled",color:"green",timeout:1e3})},n=async $=>{await e.login($)&&(await g(),i.add({title:"ç™»å½•æˆåŠŸ",description:"æ¬¢è¿å›æ¥ï¼",icon:"i-fluent-checkmark-starburst-16-filled",color:"green",timeout:1e3}),d.push("/"))},y=async()=>{await e.logout(),e.clearUserStatus(),i.add({title:"æ³¨é”€æˆåŠŸ",description:"æ¬¢è¿å†æ¬¡ä½¿ç”¨ï¼",icon:"i-fluent-checkmark-starburst-16-filled",color:"green",timeout:1e3}),d.push("/")},h=async()=>await g();return de(async()=>{await g()}),{register:s,login:n,logout:y,getStatus:h}},G=Ve(_.ui.strategy,_.ui.select,dt),_t=ne({components:{UIcon:je},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>G.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>G.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:null,validator(e){return Object.keys(G.size).includes(e)}},color:{type:String,default:()=>G.default.color,validator(e){return[..._.ui.colors,...Object.keys(G.color)].includes(e)}},variant:{type:String,default:()=>G.default.variant,validator(e){return[...Object.keys(G.variant),...Object.values(G.color).flatMap(i=>Object.keys(i))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:i,slots:d}){const{ui:g,attrs:s}=Ue("select",ce(e,"ui"),G,ce(e,"class")),{size:n,rounded:y}=ut({ui:g,props:e}),{emitFormChange:h,inputId:$,color:k,size:z,name:V}=De(e,G),p=L(()=>n.value??z.value),t=A=>{i("update:modelValue",A.target.value)},U=A=>{i("change",A.target.value),h()},v=A=>Oe(A,e.valueAttribute,""),S=A=>Oe(A,e.optionAttribute,""),x=A=>["string","number","boolean"].includes(typeof A)?{[e.valueAttribute]:A,[e.optionAttribute]:A}:{...A,[e.valueAttribute]:v(A),[e.optionAttribute]:S(A)},F=L(()=>e.options.map(A=>x(A))),l=L(()=>e.placeholder?[{[e.valueAttribute]:"",[e.optionAttribute]:e.placeholder,disabled:!0},...F.value]:F.value),K=L(()=>{const A=x(e.modelValue),X=l.value.find(te=>te[e.valueAttribute]===A[e.valueAttribute]);return X?X[e.valueAttribute]:""}),H=L(()=>{var X,te;const A=((te=(X=g.value.color)==null?void 0:X[k.value])==null?void 0:te[e.variant])||g.value.variant[e.variant];return Ne(ie(g.value.base,g.value.form,y.value,g.value.size[p.value],e.padded?g.value.padding[p.value]:"p-0",A==null?void 0:A.replaceAll("{color}",k.value),(N.value||d.leading)&&g.value.leading.padding[p.value],(se.value||d.trailing)&&g.value.trailing.padding[p.value]),e.placeholder&&!e.modelValue&&g.value.placeholder,e.selectClass)}),N=L(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),se=L(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),he=L(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),fe=L(()=>e.loading&&!N.value?e.loadingIcon:e.trailingIcon||e.icon),I=L(()=>ie(g.value.icon.leading.wrapper,g.value.icon.leading.pointer,g.value.icon.leading.padding[p.value])),Y=L(()=>ie(g.value.icon.base,k.value&&_.ui.colors.includes(k.value)&&g.value.icon.color.replaceAll("{color}",k.value),g.value.icon.size[p.value],e.loading&&g.value.icon.loading)),Q=L(()=>ie(g.value.icon.trailing.wrapper,g.value.icon.trailing.pointer,g.value.icon.trailing.padding[p.value])),me=L(()=>ie(g.value.icon.base,k.value&&_.ui.colors.includes(k.value)&&g.value.icon.color.replaceAll("{color}",k.value),g.value.icon.size[p.value],e.loading&&!N.value&&g.value.icon.loading));return{ui:g,attrs:s,name:V,inputId:$,normalizedOptionsWithPlaceholder:l,normalizedValue:K,isLeading:N,isTrailing:se,selectClass:H,leadingIconName:he,leadingIconClass:Y,leadingWrapperIconClass:I,trailingIconName:fe,trailingIconClass:me,trailingWrapperIconClass:Q,onInput:t,onChange:U}}}),Yt=["id","name","value","required","disabled"],Qt=["value","label"],Xt=["value","selected","disabled","textContent"],Zt=["value","selected","disabled","textContent"];function eo(e,i,d,g,s,n){const y=je;return f(),m("div",{class:O(e.ui.wrapper)},[a("select",oe({id:e.inputId,name:e.name,value:e.modelValue,required:e.required,disabled:e.disabled,class:e.selectClass},e.attrs,{onInput:i[0]||(i[0]=(...h)=>e.onInput&&e.onInput(...h)),onChange:i[1]||(i[1]=(...h)=>e.onChange&&e.onChange(...h))}),[(f(!0),m(W,null,ue(e.normalizedOptionsWithPlaceholder,(h,$)=>(f(),m(W,null,[h.children?(f(),m("optgroup",{key:`${h[e.valueAttribute]}-optgroup-${$}`,value:h[e.valueAttribute],label:h[e.optionAttribute]},[(f(!0),m(W,null,ue(h.children,(k,z)=>(f(),m("option",{key:`${k[e.valueAttribute]}-${$}-${z}`,value:k[e.valueAttribute],selected:k[e.valueAttribute]===e.normalizedValue,disabled:k.disabled,textContent:E(k[e.optionAttribute])},null,8,Xt))),128))],8,Qt)):(f(),m("option",{key:`${h[e.valueAttribute]}-${$}`,value:h[e.valueAttribute],selected:h[e.valueAttribute]===e.normalizedValue,disabled:h.disabled,textContent:E(h[e.optionAttribute])},null,8,Zt))],64))),256))],16,Yt),e.isLeading&&e.leadingIconName||e.$slots.leading?(f(),m("span",{key:0,class:O(e.leadingWrapperIconClass)},[q(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[r(y,{name:e.leadingIconName,class:O(e.leadingIconClass)},null,8,["name","class"])],!0)],2)):P("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(f(),m("span",{key:1,class:O(e.trailingWrapperIconClass)},[q(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[r(y,{name:e.trailingIconName,class:O(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])],!0)],2)):P("",!0)],2)}const to=pe(_t,[["render",eo],["__scopeId","data-v-db8f1118"]]),oo={class:"bg-gray-700 rounded-lg p-4 mb-6"},so={class:"space-y-4"},ao={class:"bg-gray-800 rounded p-3"},ro={class:"flex justify-between items-center mb-2"},no={class:"flex items-center gap-2"},lo={key:0,class:"space-y-2"},io={class:"flex justify-end gap-2"},uo={class:"bg-gray-800 rounded p-3"},co={class:"flex justify-between items-center mb-2"},po={class:"flex items-center gap-2"},fo={key:0,class:"space-y-2"},mo={class:"flex justify-end gap-2"},go={class:"bg-gray-800 rounded p-3"},wo={class:"flex justify-between items-center mb-2"},vo={class:"flex items-center gap-2"},bo={key:0,class:"space-y-2"},yo={class:"flex justify-end gap-2"},ho={class:"bg-gray-800 rounded p-3"},ko={class:"flex justify-between items-center mb-2"},$o={class:"flex items-center gap-2"},So={key:0,class:"space-y-2"},Co={class:"flex justify-end gap-2"},Vo={class:"bg-gray-800 rounded p-3"},Uo={class:"flex justify-between items-center mb-2"},To={class:"flex items-center gap-2"},jo={key:0,class:"space-y-2"},Eo={class:"flex justify-end gap-2"},Ao={class:"bg-gray-800 rounded p-3"},Io={class:"flex justify-between items-center mb-2"},Ho={class:"flex items-center gap-2"},Lo={key:0,class:"space-y-2"},Po={class:"flex justify-end gap-2"},Ro={class:"mt-4 flex flex-wrap gap-2"},Oo=ne({__name:"NotifyPanel",props:{config:{},immediate:{type:Boolean}},emits:["save"],setup(e,{emit:i}){const d=i,g=e,s=ee({webhookEnabled:!1,webhookURL:"",telegramEnabled:!1,telegramToken:"",telegramChatID:"",weworkEnabled:!1,weworkKey:"",feishuEnabled:!1,feishuWebhook:"",feishuSecret:"",twitterEnabled:!1,twitterApiKey:"",twitterApiSecret:"",twitterAccessToken:"",twitterAccessTokenSecret:"",customHttpEnabled:!1,customHttpUrl:"",customHttpMethod:"POST",customHttpHeaders:"",customHttpBody:'{"content":"{{content}}"}'}),n=ee({webhook:!1,telegram:!1,wework:!1,feishu:!1,twitter:!1,customHttp:!1}),y=["webhook","telegram","wework","feishu","twitter","customHttp"],h=p=>({webhook:"Webhook",telegram:"Telegram",wework:"ä¼ä¸šå¾®ä¿¡",feishu:"é£ä¹¦",twitter:"Twitter",customHttp:"è‡ªå®šä¹‰HTTP"})[p]||p,$=p=>{const t=p.toLowerCase();Object.keys(s).forEach(U=>{U.toLowerCase().startsWith(t)&&(s[U]=g.config[U])}),n[p]=!1},k=p=>{var U,v,S,x,F,l,K,H,N,se;const t=s;switch(p){case"webhook":return t.webhookEnabled&&!!((U=t.webhookURL)!=null&&U.trim());case"telegram":return t.telegramEnabled&&!!((v=t.telegramToken)!=null&&v.trim())&&!!((S=t.telegramChatID)!=null&&S.trim());case"wework":return t.weworkEnabled&&!!((x=t.weworkKey)!=null&&x.trim());case"feishu":return t.feishuEnabled&&!!((F=t.feishuWebhook)!=null&&F.trim());case"twitter":return t.twitterEnabled&&!!((l=t.twitterApiKey)!=null&&l.trim())&&!!((K=t.twitterApiSecret)!=null&&K.trim())&&!!((H=t.twitterAccessToken)!=null&&H.trim())&&!!((N=t.twitterAccessTokenSecret)!=null&&N.trim());case"customHttp":return t.customHttpEnabled&&!!((se=t.customHttpUrl)!=null&&se.trim());default:return!1}},z=async p=>{try{switch(p){case"webhook":if(s.webhookEnabled&&!s.webhookURL)throw new Error("Webhook URLä¸èƒ½ä¸ºç©º");break;case"telegram":if(s.telegramEnabled&&(!s.telegramToken||!s.telegramChatID))throw new Error("Telegramé…ç½®ä¸å®Œæ•´");break;case"wework":if(s.weworkEnabled&&!s.weworkKey)throw new Error("ä¼ä¸šå¾®ä¿¡Keyä¸èƒ½ä¸ºç©º");break;case"feishu":if(s.feishuEnabled&&!s.feishuWebhook)throw new Error("é£ä¹¦Webhookä¸èƒ½ä¸ºç©º");break;case"twitter":if(s.twitterEnabled&&(!s.twitterApiKey||!s.twitterApiSecret||!s.twitterAccessToken||!s.twitterAccessTokenSecret))throw new Error("Twitteré…ç½®ä¸å®Œæ•´");break;case"customHttp":if(s.customHttpEnabled&&!s.customHttpUrl)throw new Error("è‡ªå®šä¹‰HTTP URLä¸èƒ½ä¸ºç©º");break}const t={webhookEnabled:s.webhookEnabled,webhookURL:s.webhookURL,telegramEnabled:s.telegramEnabled,telegramToken:s.telegramToken,telegramChatID:s.telegramChatID,weworkEnabled:s.weworkEnabled,weworkKey:s.weworkKey,feishuEnabled:s.feishuEnabled,feishuWebhook:s.feishuWebhook,feishuSecret:s.feishuSecret,twitterEnabled:s.twitterEnabled,twitterApiKey:s.twitterApiKey,twitterApiSecret:s.twitterApiSecret,twitterAccessToken:s.twitterAccessToken,twitterAccessTokenSecret:s.twitterAccessTokenSecret,customHttpEnabled:s.customHttpEnabled,customHttpUrl:s.customHttpUrl,customHttpMethod:s.customHttpMethod,customHttpHeaders:s.customHttpHeaders,customHttpBody:s.customHttpBody},v=await(await fetch("/api/notify/config",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();if(v.code===1)n[p]=!1,v.data&&Object.keys(v.data).forEach(S=>{S.endsWith("Enabled")?s[S]=!!v.data[S]&&v.data[S]!=="false":s[S]=v.data[S]||""}),d("save",{...s}),C().add({title:"æˆåŠŸ",description:`${h(p)}é…ç½®å·²ä¿å­˜`,color:"green"});else throw new Error(v.msg||"ä¿å­˜å¤±è´¥")}catch(t){console.error("ä¿å­˜é…ç½®å¤±è´¥:",t),C().add({title:"é”™è¯¯",description:t.message||"ä¿å­˜å¤±è´¥",color:"red"})}},V=async p=>{try{if(!k(p))throw new Error(`è¯·å…ˆå®Œæˆå¹¶å¯ç”¨${h(p)}é…ç½®`);const U=await(await fetch("/api/notify/test",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:p})})).json();if(U.code===1)C().add({title:"æˆåŠŸ",description:`${h(p)}æµ‹è¯•æ¶ˆæ¯å·²å‘é€`,color:"green"});else throw new Error(U.msg||"æµ‹è¯•å¤±è´¥")}catch(t){console.error("æµ‹è¯•å¤±è´¥:",t),C().add({title:"é”™è¯¯",description:t.message||"æµ‹è¯•å¤±è´¥",color:"red"})}};return Fe(()=>g.config,p=>{p&&Object.keys(s).forEach(t=>{p[t]!==void 0&&(t.endsWith("Enabled")?s[t]=!!p[t]&&p[t]!=="false":s[t]=p[t])})},{deep:!0,immediate:!0}),de(async()=>{try{const t=await(await fetch("/api/notify/config",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}})).json();if(t.code===1&&t.data){const U=t.data;Object.keys(U).forEach(v=>{v.endsWith("Enabled")?s[v]=!!U[v]&&U[v]!=="false":s[v]=U[v]||""}),console.log("åŠ è½½çš„é…ç½®:",s)}}catch(p){console.error("è·å–é…ç½®å¤±è´¥:",p),C().add({title:"é”™è¯¯",description:"è·å–æ¨é€é…ç½®å¤±è´¥",color:"red"})}}),(p,t)=>{const U=ct("USwitch"),v=We,S=Me,x=to,F=qe;return f(),m("div",oo,[t[56]||(t[56]=a("div",{class:"flex justify-between items-center mb-4"},[a("h2",{class:"text-xl font-semibold text-white"},"æ¨é€æ¸ é“é…ç½®")],-1)),a("div",so,[a("div",ao,[a("div",ro,[t[38]||(t[38]=a("span",{class:"text-gray-300"},"Webhookæ¨é€",-1)),a("div",no,[r(U,{modelValue:s.webhookEnabled,"onUpdate:modelValue":t[0]||(t[0]=l=>s.webhookEnabled=l)},null,8,["modelValue"]),r(v,{size:"sm",onClick:t[1]||(t[1]=l=>n.webhook=!n.webhook),color:n.webhook?"gray":"primary",variant:"soft"},{default:b(()=>[w(E(n.webhook?"å–æ¶ˆ":"ç¼–è¾‘"),1)]),_:1},8,["color"])])]),n.webhook?(f(),m("div",lo,[r(S,{modelValue:s.webhookURL,"onUpdate:modelValue":t[2]||(t[2]=l=>s.webhookURL=l),placeholder:"Webhook URL"},null,8,["modelValue"]),a("div",io,[r(v,{onClick:t[3]||(t[3]=l=>$("webhook")),variant:"ghost",color:"gray"},{default:b(()=>t[39]||(t[39]=[w(" é‡ç½® ")])),_:1}),r(v,{onClick:t[4]||(t[4]=l=>z("webhook")),color:"primary"},{default:b(()=>t[40]||(t[40]=[w(" ä¿å­˜ ")])),_:1})])])):P("",!0)]),a("div",uo,[a("div",co,[t[41]||(t[41]=a("span",{class:"text-gray-300"},"Telegramæ¨é€",-1)),a("div",po,[r(U,{modelValue:s.telegramEnabled,"onUpdate:modelValue":t[5]||(t[5]=l=>s.telegramEnabled=l)},null,8,["modelValue"]),r(v,{size:"sm",onClick:t[6]||(t[6]=l=>n.telegram=!n.telegram),color:n.telegram?"gray":"primary",variant:"soft"},{default:b(()=>[w(E(n.telegram?"å–æ¶ˆ":"ç¼–è¾‘"),1)]),_:1},8,["color"])])]),n.telegram?(f(),m("div",fo,[r(S,{modelValue:s.telegramToken,"onUpdate:modelValue":t[7]||(t[7]=l=>s.telegramToken=l),placeholder:"Bot Token"},null,8,["modelValue"]),r(S,{modelValue:s.telegramChatID,"onUpdate:modelValue":t[8]||(t[8]=l=>s.telegramChatID=l),placeholder:"Chat ID"},null,8,["modelValue"]),a("div",mo,[r(v,{onClick:t[9]||(t[9]=l=>$("telegram")),variant:"ghost",color:"gray"},{default:b(()=>t[42]||(t[42]=[w(" é‡ç½® ")])),_:1}),r(v,{onClick:t[10]||(t[10]=l=>z("telegram")),color:"primary"},{default:b(()=>t[43]||(t[43]=[w(" ä¿å­˜ ")])),_:1})])])):P("",!0)]),a("div",go,[a("div",wo,[t[44]||(t[44]=a("span",{class:"text-gray-300"},"ä¼ä¸šå¾®ä¿¡æ¨é€",-1)),a("div",vo,[r(U,{modelValue:s.weworkEnabled,"onUpdate:modelValue":t[11]||(t[11]=l=>s.weworkEnabled=l)},null,8,["modelValue"]),r(v,{size:"sm",onClick:t[12]||(t[12]=l=>n.wework=!n.wework),color:n.wework?"gray":"primary",variant:"soft"},{default:b(()=>[w(E(n.wework?"å–æ¶ˆ":"ç¼–è¾‘"),1)]),_:1},8,["color"])])]),n.wework?(f(),m("div",bo,[r(S,{modelValue:s.weworkKey,"onUpdate:modelValue":t[13]||(t[13]=l=>s.weworkKey=l),placeholder:"WebHook Key"},null,8,["modelValue"]),a("div",yo,[r(v,{onClick:t[14]||(t[14]=l=>$("wework")),variant:"ghost",color:"gray"},{default:b(()=>t[45]||(t[45]=[w(" é‡ç½® ")])),_:1}),r(v,{onClick:t[15]||(t[15]=l=>z("wework")),color:"primary"},{default:b(()=>t[46]||(t[46]=[w(" ä¿å­˜ ")])),_:1})])])):P("",!0)]),a("div",ho,[a("div",ko,[t[47]||(t[47]=a("span",{class:"text-gray-300"},"é£ä¹¦æ¨é€",-1)),a("div",$o,[r(U,{modelValue:s.feishuEnabled,"onUpdate:modelValue":t[16]||(t[16]=l=>s.feishuEnabled=l)},null,8,["modelValue"]),r(v,{size:"sm",onClick:t[17]||(t[17]=l=>n.feishu=!n.feishu),color:n.feishu?"gray":"primary",variant:"soft"},{default:b(()=>[w(E(n.feishu?"å–æ¶ˆ":"ç¼–è¾‘"),1)]),_:1},8,["color"])])]),n.feishu?(f(),m("div",So,[r(S,{modelValue:s.feishuWebhook,"onUpdate:modelValue":t[18]||(t[18]=l=>s.feishuWebhook=l),placeholder:"WebHook URL"},null,8,["modelValue"]),r(S,{modelValue:s.feishuSecret,"onUpdate:modelValue":t[19]||(t[19]=l=>s.feishuSecret=l),placeholder:"ç­¾åå¯†é’¥",type:"password"},null,8,["modelValue"]),a("div",Co,[r(v,{onClick:t[20]||(t[20]=l=>$("feishu")),variant:"ghost",color:"gray"},{default:b(()=>t[48]||(t[48]=[w(" é‡ç½® ")])),_:1}),r(v,{onClick:t[21]||(t[21]=l=>z("feishu")),color:"primary"},{default:b(()=>t[49]||(t[49]=[w(" ä¿å­˜ ")])),_:1})])])):P("",!0)]),a("div",Vo,[a("div",Uo,[t[50]||(t[50]=a("span",{class:"text-gray-300"},"Twitteræ¨é€",-1)),a("div",To,[r(U,{modelValue:s.twitterEnabled,"onUpdate:modelValue":t[22]||(t[22]=l=>s.twitterEnabled=l)},null,8,["modelValue"]),r(v,{size:"sm",onClick:t[23]||(t[23]=l=>n.twitter=!n.twitter),color:n.twitter?"gray":"primary",variant:"soft"},{default:b(()=>[w(E(n.twitter?"å–æ¶ˆ":"ç¼–è¾‘"),1)]),_:1},8,["color"])])]),n.twitter?(f(),m("div",jo,[r(S,{modelValue:s.twitterApiKey,"onUpdate:modelValue":t[24]||(t[24]=l=>s.twitterApiKey=l),placeholder:"API Key"},null,8,["modelValue"]),r(S,{modelValue:s.twitterApiSecret,"onUpdate:modelValue":t[25]||(t[25]=l=>s.twitterApiSecret=l),placeholder:"API Secret"},null,8,["modelValue"]),r(S,{modelValue:s.twitterAccessToken,"onUpdate:modelValue":t[26]||(t[26]=l=>s.twitterAccessToken=l),placeholder:"Access Token"},null,8,["modelValue"]),r(S,{modelValue:s.twitterAccessTokenSecret,"onUpdate:modelValue":t[27]||(t[27]=l=>s.twitterAccessTokenSecret=l),placeholder:"Access Token Secret"},null,8,["modelValue"]),a("div",Eo,[r(v,{onClick:t[28]||(t[28]=l=>$("twitter")),variant:"ghost",color:"gray"},{default:b(()=>t[51]||(t[51]=[w("é‡ç½®")])),_:1}),r(v,{onClick:t[29]||(t[29]=l=>z("twitter")),color:"primary"},{default:b(()=>t[52]||(t[52]=[w("ä¿å­˜")])),_:1})])])):P("",!0)]),a("div",Ao,[a("div",Io,[t[53]||(t[53]=a("span",{class:"text-gray-300"},"è‡ªå®šä¹‰HTTPæ¨é€",-1)),a("div",Ho,[r(U,{modelValue:s.customHttpEnabled,"onUpdate:modelValue":t[30]||(t[30]=l=>s.customHttpEnabled=l)},null,8,["modelValue"]),r(v,{size:"sm",onClick:t[31]||(t[31]=l=>n.customHttp=!n.customHttp),color:n.customHttp?"gray":"primary",variant:"soft"},{default:b(()=>[w(E(n.customHttp?"å–æ¶ˆ":"ç¼–è¾‘"),1)]),_:1},8,["color"])])]),n.customHttp?(f(),m("div",Lo,[r(S,{modelValue:s.customHttpUrl,"onUpdate:modelValue":t[32]||(t[32]=l=>s.customHttpUrl=l),placeholder:"è¯·æ±‚URL"},null,8,["modelValue"]),r(x,{modelValue:s.customHttpMethod,"onUpdate:modelValue":t[33]||(t[33]=l=>s.customHttpMethod=l),options:["POST","PUT","PATCH"]},null,8,["modelValue"]),r(F,{modelValue:s.customHttpHeaders,"onUpdate:modelValue":t[34]||(t[34]=l=>s.customHttpHeaders=l),placeholder:"è¯·æ±‚Headersï¼ˆJSONæ ¼å¼ï¼‰"},null,8,["modelValue"]),r(F,{modelValue:s.customHttpBody,"onUpdate:modelValue":t[35]||(t[35]=l=>s.customHttpBody=l),placeholder:'è¯·æ±‚Bodyæ¨¡æ¿ï¼ˆå¦‚ï¼š{"content":"{{content}}"})'},null,8,["modelValue"]),a("div",Po,[r(v,{onClick:t[36]||(t[36]=l=>$("customHttp")),variant:"ghost",color:"gray"},{default:b(()=>t[54]||(t[54]=[w("é‡ç½®")])),_:1}),r(v,{onClick:t[37]||(t[37]=l=>z("customHttp")),color:"primary"},{default:b(()=>t[55]||(t[55]=[w("ä¿å­˜")])),_:1})])])):P("",!0)])]),a("div",Ro,[(f(),m(W,null,ue(y,l=>r(v,{key:l,onClick:K=>V(l),class:"flex-grow sm:flex-grow-0",variant:"solid"},{default:b(()=>[w(" æµ‹è¯•"+E(h(l)),1)]),_:2},1032,["onClick"])),64))])])}}}),zo={class:"fixed inset-0 bg-black overflow-auto"},No={class:"min-h-screen p-4 flex items-center justify-center"},xo={class:"w-[800px] max-w-[95%] bg-[#1a1b2e]/80 backdrop-blur-md rounded-lg shadow-xl p-6"},Bo={class:"text-center mb-6 flex items-center justify-center gap-2"},Fo={key:0,class:"text-center mb-6"},Wo={class:"flex items-center justify-center gap-2 text-orange-400"},Do={class:"bg-gray-700 rounded-lg p-4 mb-6"},Mo={class:"grid gap-4"},qo={class:"flex justify-between items-center"},Ko={class:"text-white font-medium"},Jo={class:"flex justify-between items-center"},Go={class:"text-white font-medium"},_o={class:"flex justify-between items-center"},Yo={class:"text-white font-medium"},Qo={key:1,class:"bg-gray-700 rounded-lg p-4 mb-6"},Xo={class:"space-y-4"},Zo={class:"bg-gray-800 rounded p-3"},es={class:"flex justify-between items-center mb-2"},ts={key:0},os={class:"flex justify-end gap-2"},ss={key:1},as={class:"text-white"},rs={class:"bg-gray-800 rounded p-3"},ns={class:"flex justify-between items-center mb-2"},ls={key:0,class:"mb-2"},is={class:"flex items-center gap-2"},ds={key:1},us={class:"bg-gray-800 rounded p-3"},cs={class:"flex justify-between items-center mb-2"},ps={key:0},fs={class:"flex justify-end gap-2"},ms={key:2,class:"bg-gray-700 rounded-lg p-4 mb-6"},gs={class:"flex items-center bg-gray-800 rounded p-3 mb-4 justify-between"},ws={class:"flex items-center gap-4"},vs={class:"flex items-center"},bs={class:"flex items-center"},ys={class:"space-y-4"},hs={class:"flex justify-between items-center mb-2"},ks={class:"text-gray-300"},$s={key:0},Ss={key:0,class:"space-y-2"},Cs={class:"flex gap-2"},Vs={class:"flex justify-end gap-2"},Us={key:1},Ts={key:0,class:"grid grid-cols-3 gap-2"},js=["src","onClick"],Es={key:1,class:"text-white break-words"},As={key:3,class:"flex justify-end gap-2 mb-6"},Is={key:5,class:"bg-gray-700 rounded-lg p-4 mb-6"},Hs={class:"space-y-4"},Ls={class:"flex gap-4"},Ps={class:"flex justify-between items-center"},Rs={key:0},Os={key:1,class:"flex gap-2"},zs={class:"bg-gray-800 p-6 rounded-lg"},Ns={class:"text-xl font-semibold text-white mb-4"},xs={class:"flex justify-between items-center"},Bs=ne({__name:"StatusPanel",emits:["restore-success"],setup(e,{emit:i}){const d=D(!0),g=async()=>{try{const o=await(await fetch("/api/frontend/config",{credentials:"include"})).json();o.code===1&&typeof o.data.allowRegistration=="boolean"&&(d.value=o.data.allowRegistration)}catch{C().add({title:"è·å–æ³¨å†Œé…ç½®å¤±è´¥",color:"red"})}};de(g);const s=async()=>{try{const o=await(await fetch("/api/frontend/config",{credentials:"include"})).json();let u={};o.code===1?u={...o.data,allowRegistration:d.value}:u={allowRegistration:d.value};const j=await(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)})).json();if(j.code===1)C().add({title:"ä¿å­˜æˆåŠŸ",color:"green"});else throw new Error(j.msg||"ä¿å­˜å¤±è´¥")}catch{C().add({title:"ä¿å­˜å¤±è´¥",color:"red"})}},n=Be(),{login:y,register:h}=Gt(),$=D(""),k=ee({checking:!1,hasUpdate:!1,latestVersion:""});let z=ee({webhookEnabled:!1,webhookURL:"",telegramEnabled:!1,telegramToken:"",telegramChatID:"",weworkEnabled:!1,weworkKey:"",feishuEnabled:!1,feishuWebhook:"",feishuSecret:""});const V=async()=>{k.checking=!0;try{const o=await(await fetch("/api/version/check",{credentials:"include",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})).json();if(o.code===1){const{hasUpdate:u,lastUpdateTime:R}=o.data;k.hasUpdate=u,k.latestVersion=new Date(R).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),u?C().add({title:"å‘ç°ç‰ˆæœ¬",description:`æœ€æ–°ç‰ˆæœ¬å‘å¸ƒäº ${k.latestVersion}`,color:"orange"}):C().add({title:"å·²æ˜¯æœ€æ–°ç‰ˆæœ¬",description:"å½“å‰ä½¿ç”¨çš„æ˜¯æœ€æ–°ç‰ˆæœ¬",color:"green"})}else throw new Error(o.msg||"æ£€æŸ¥æ›´æ–°å¤±è´¥")}catch(c){console.error("æ£€æŸ¥ç‰ˆæœ¬æ›´æ–°å¤±è´¥:",c),C().add({title:"æ£€æŸ¥æ›´æ–°å¤±è´¥",description:"è¯·ç§‘å­¦ä¸Šç½‘åé‡è¯•",color:"red"})}finally{k.checking=!1}},p=async()=>{var c;if(!n.isLogin){C().add({title:"é”™è¯¯",description:"è¯·å…ˆç™»å½•",color:"red"});return}try{const o=await fetch("/api/user/token/regenerate",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),u=await o.json();if(!o.ok)throw new Error(u.msg||"Tokenç”Ÿæˆè¯·æ±‚å¤±è´¥");if(u.code===1&&((c=u.data)!=null&&c.token))$.value=u.data.token,C().add({title:"æˆåŠŸ",description:"Token å·²æ›´æ–°",color:"green"});else throw new Error(u.msg||"Token ç”Ÿæˆå¤±è´¥")}catch(o){console.error("Tokenç”Ÿæˆé”™è¯¯:",o),C().add({title:"é”™è¯¯",description:o.message||"Token ç”Ÿæˆå¤±è´¥",color:"red"})}},t=async()=>{try{await navigator.clipboard.writeText($.value),C().add({title:"æˆåŠŸ",description:"Token å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",color:"green"})}catch{C().add({title:"é”™è¯¯",description:"å¤åˆ¶å¤±è´¥",color:"red"})}},U=async()=>{try{if(!(await fetch("/api/user/logout",{method:"POST",credentials:"include"})).ok)throw new Error("é€€å‡ºè¯·æ±‚å¤±è´¥");n.$reset(),window.location.reload(),C().add({title:"æˆåŠŸ",description:"å·²é€€å‡ºç™»å½•",color:"green"})}catch{C().add({title:"é”™è¯¯",description:"é€€å‡ºç™»å½•å¤±è´¥",color:"red"})}},v=L(()=>(n==null?void 0:n.isLogin)??!1),S=L(()=>{var c;return((c=n.user)==null?void 0:c.is_admin)??!1}),x=D(!0),F=D(!1),l=D(!1),K=D(null),H=ee({username:"",oldPassword:"",newPassword:""}),N=ee({username:!1,password:!1}),se=async()=>{try{if(!H.username.trim())throw new Error("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");const o=await(await fetch("/api/user/update",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:H.username,type:"username"})})).json();if(o.code===1)await n.getUser(),N.username=!1,H.username="",C().add({title:"æˆåŠŸ",description:"ç”¨æˆ·åå·²æ›´æ–°",color:"green"});else throw new Error(o.msg)}catch(c){C().add({title:"é”™è¯¯",description:c.message||"æ›´æ–°å¤±è´¥",color:"red"})}},he=async()=>{try{if(!H.newPassword||!H.oldPassword)throw new Error("å¯†ç ä¸èƒ½ä¸ºç©º");if(H.newPassword===H.oldPassword)throw new Error("æ–°å¯†ç ä¸èƒ½ä¸å½“å‰å¯†ç ç›¸åŒ");const o=await(await fetch("/api/user/change_password",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({password:H.newPassword,oldPassword:H.oldPassword})})).json();if(o.code===1)N.password=!1,H.oldPassword="",H.newPassword="",C().add({title:"æˆåŠŸ",description:"å¯†ç å·²æ›´æ–°",color:"green"});else throw new Error(o.msg)}catch(c){C().add({title:"é”™è¯¯",description:c.message||"æ›´æ–°å¤±è´¥",color:"red"})}},fe={siteTitle:"ç«™ç‚¹æ ‡é¢˜",subtitleText:"æ¬¢è¿è¯­",avatarURL:"å¤´åƒé“¾æ¥",username:"ç”¨æˆ·å",description:"ä¸ªäººæè¿°",backgrounds:"èƒŒæ™¯å›¾ç‰‡",cardFooterTitle:"å¡ç‰‡é¡µè„šæ ‡é¢˜",cardFooterLink:"å¡ç‰‡é¡µè„šé“¾æ¥",pageFooterHTML:"é¡µé¢åº•éƒ¨HTML",rssTitle:"RSS æ ‡é¢˜",rssDescription:"RSS æè¿°",rssAuthorName:"RSS ä½œè€…",rssFaviconURL:"RSS å›¾æ ‡é“¾æ¥",walineServerURL:"Waline è¯„è®ºæœåŠ¡å™¨åœ°å€"},I=ee({siteTitle:"",subtitleText:"",avatarURL:"",username:"",description:"",backgrounds:[],cardFooterTitle:"",cardFooterLink:"",pageFooterHTML:"",rssTitle:"",rssDescription:"",rssAuthorName:"",rssFaviconURL:"",walineServerURL:""}),Y=ee({username:"",password:""}),Q=ee({siteTitle:!1,subtitleText:!1,avatarURL:!1,username:!1,description:!1,backgrounds:!1,cardFooterTitle:!1,cardFooterLink:!1,pageFooterHTML:!1,rssTitle:!1,rssDescription:!1,rssAuthorName:!1,rssFaviconURL:!1,walineServerURL:!1}),me={siteTitle:"Noiseçš„è¯´è¯´ç¬”è®°",subtitleText:"æ¬¢è¿è®¿é—®ï¼Œç‚¹å‡»å¤´åƒå¯æ›´æ¢å°é¢èƒŒæ™¯ï¼",avatarURL:"https://s2.loli.net/2025/03/24/HnSXKvibAQlosIW.png",username:"Noise",description:"æ‰§è¿·ä¸æ‚Ÿ",backgrounds:["https://s2.loli.net/2025/03/27/KJ1trnU2ksbFEYM.jpg","https://s2.loli.net/2025/03/27/MZqaLczCvwjSmW7.jpg","https://s2.loli.net/2025/03/27/UMijKXwJ9yTqSeE.jpg","https://s2.loli.net/2025/03/27/WJQIlkXvBg2afcR.jpg","https://s2.loli.net/2025/03/27/oHNQtf4spkq2iln.jpg","https://s2.loli.net/2025/03/27/PMRuX5loc6Uaimw.jpg","https://s2.loli.net/2025/03/27/U2WIslbNyTLt4rD.jpg","https://s2.loli.net/2025/03/27/xu1jZL5Og4pqT9d.jpg","https://s2.loli.net/2025/03/27/OXqwzZ6v3PVIns9.jpg","https://s2.loli.net/2025/03/27/HGuqlE6apgNywbh.jpg","https://s2.loli.net/2025/03/26/d7iyuPYA8cRqD1K.jpg","https://s2.loli.net/2025/03/27/wYy12qDMH6bGJOI.jpg","https://s2.loli.net/2025/03/27/y67m2k5xcSdTsHN.jpg"],cardFooterTitle:"NoiseÂ·è¯´è¯´Â·ç¬”è®°~",cardFooterLink:"note.noisework.cn",pageFooterHTML:'<div class="text-center text-xs text-gray-400 py-4">æ¥è‡ª<a href="https://www.noisework.cn" target="_blank" rel="noopener noreferrer" class="text-orange-400 hover:text-orange-500">Noise</a> ä½¿ç”¨<a href="https://github.com/rcy1314/echo-noise" target="_blank" rel="noopener noreferrer" class="text-orange-400 hover:text-orange-500">Ech0-Noise</a>å‘å¸ƒ</div>',rssTitle:"Noiseçš„è¯´è¯´ç¬”è®°",rssDescription:"ä¸€ä¸ªè¯´è¯´ç¬”è®°~",rssAuthorName:"Noise",rssFaviconURL:"/favicon.ico",walineServerURL:"è¯·å‰å¾€walineå®˜ç½‘https://waline.js.orgæŸ¥çœ‹éƒ¨ç½²é…ç½®"},A=c=>{I[c]=me[c],Q[c]=!1},X=async()=>{var c;try{const u=await(await fetch("/api/frontend/config",{credentials:"include",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})).json();if((c=u==null?void 0:u.data)!=null&&c.frontendSettings){const R=u.data.frontendSettings;Object.keys(I).forEach(j=>{if(j==="backgrounds"){const M=R[j];Array.isArray(M)&&(I[j]=[...M])}else I[j]=R[j]??me[j]})}}catch(o){console.error("è·å–é…ç½®å¤±è´¥:",o)}},te=async c=>{try{if(c==="backgrounds"){const j=I.backgrounds.filter(M=>M&&M.trim()!=="");I.backgrounds=j}const u=await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({frontendSettings:I})});if(!u.ok){const j=await u.json();throw new Error(j.msg||"è¯·æ±‚å¤±è´¥")}const R=await u.json();if(R.code===1)Q[c]=!1,window.dispatchEvent(new CustomEvent("frontend-config-updated")),await X(),C().add({title:"æˆåŠŸ",description:`${fe[c]}å·²æ›´æ–°`,color:"green"});else throw new Error(R.msg||"ä¿å­˜å¤±è´¥")}catch(o){console.error("ä¿å­˜é…ç½®å¤±è´¥:",o),C().add({title:"é”™è¯¯",description:o.message||"é…ç½®æ›´æ–°å¤±è´¥",color:"red"})}},Ke=async c=>{const o=c.target.files;if(!o)return;const u=["image/jpeg","image/png","image/webp"];for(const R of Array.from(o))try{if(!u.includes(R.type))throw new Error("ä»…æ”¯æŒ JPG/PNG/WEBP æ ¼å¼");const j=new FormData;j.append("image",R);const M=await fetch("/api/images/upload",{method:"POST",credentials:"include",body:j}),Z=await M.json();if(!M.ok||Z.code!==1)throw new Error(Z.msg||"ä¸Šä¼ å¤±è´¥");if(Z.code===1&&Z.data){const we=Z.data.startsWith("http")?Z.data:`/api${Z.data}`,ke=[...I.backgrounds,we];I.backgrounds=ke,await te("backgrounds"),C().add({title:"ä¸Šä¼ æˆåŠŸ",description:`${R.name} å·²æ·»åŠ åˆ°èƒŒæ™¯å›¾ç‰‡åˆ—è¡¨`,color:"green"})}}catch(j){C().add({title:"ä¸Šä¼ å¤±è´¥",description:j.message||"æ–‡ä»¶ä¸Šä¼ å¤±è´¥",color:"red"})}K.value&&(K.value.value="")};de(()=>{window.addEventListener("frontend-config-updated",c=>{const{key:o,value:u}=c.detail;o&&u!==void 0&&(I[o]=u)})});const Je=()=>{X(),l.value=!1},Ge=async()=>{I.backgrounds.push("")},_e=async c=>{I.backgrounds.splice(c,1),await te("backgrounds")},Ye=()=>{var c;(c=K.value)==null||c.click()},Qe=c=>{window.open(c,"_blank")};Fe(()=>n.isLogin,c=>{c||(n.getStatus(),n.getUser(),n.$reset())});const Ee=D(!1);de(async()=>{var c;try{if(Ee.value=!0,await Promise.all([n.getStatus(),n.getUser(),X(),g()]),n.isLogin){const u=await(await fetch("/api/user/token",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}})).json();u.code===1&&((c=u.data)!=null&&c.token)&&($.value=u.data.token)}}catch(o){console.error("åˆå§‹åŒ–å¤±è´¥:",o),C().add({title:"ç³»ç»Ÿæç¤º",description:"å½“å‰æœªç™»å½•",color:"red",timeout:3e3})}finally{Ee.value=!1}});const ge=D(null),Xe=async()=>{try{const c=await fetch("/api/backup/download",{credentials:"include"});if(!c.ok)throw new Error("ä¸‹è½½å¤±è´¥");const o=await c.blob(),u=window.URL.createObjectURL(o),R=document.createElement("a");R.href=u,R.download=`noise_backup_${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(R),R.click(),window.URL.revokeObjectURL(u),document.body.removeChild(R)}catch(c){C().add({title:"é”™è¯¯",description:c.message||"å¤‡ä»½ä¸‹è½½å¤±è´¥",color:"red"})}},Ze=()=>{var c;(c=ge.value)==null||c.click()},et=i,tt=async c=>{const o=c.target.files;if(!(!o||!o[0])){try{const u=new FormData;u.append("database",o[0]);const j=await(await fetch("/api/backup/restore",{method:"POST",credentials:"include",body:u})).json();if(j.code===1)C().add({title:"æˆåŠŸ",description:"æ•°æ®åº“æ¢å¤æˆåŠŸ",color:"green"}),et("restore-success"),setTimeout(()=>{window.location.reload()},1500);else throw new Error(j.msg)}catch(u){C().add({title:"é”™è¯¯",description:u.message||"æ•°æ®åº“æ¢å¤å¤±è´¥",color:"red"})}ge.value&&(ge.value.value="")}};return(c,o)=>{var Ae,Ie,He,Le,Pe,Re;const u=We,R=je,j=Me,M=Vt,Z=qe,we=Et,ke=Jt,ot=gt;return f(),m(W,null,[a("div",zo,[a("div",No,[a("div",xo,[o[49]||(o[49]=a("h1",{class:"text-3xl font-bold text-center text-white mb-8"},"ç³»ç»Ÿç®¡ç†é¢æ¿",-1)),a("div",Bo,[o[17]||(o[17]=a("span",{class:"text-gray-300"},"å½“å‰ç‰ˆæœ¬: latest",-1)),r(u,{size:"xs",color:"gray",variant:"ghost",loading:k.checking,onClick:V},{default:b(()=>[w(E(k.checking?"æ£€æµ‹ä¸­...":"æ£€æŸ¥ç‰ˆæœ¬å‘å¸ƒæ—¶é—´"),1)]),_:1},8,["loading"])]),k.hasUpdate?(f(),m("div",Fo,[a("div",Wo,[r(R,{name:"i-heroicons-arrow-up-circle",class:"w-5 h-5"}),a("span",null,"å‘ç°ç‰ˆæœ¬æœ€è¿‘æ›´æ–°ï¼ˆäº "+E(k.latestVersion)+"ï¼‰",1),o[18]||(o[18]=a("a",{href:"https://hub.docker.com/r/noise233/echo-noise/tags",target:"_blank",class:"text-blue-400 hover:text-blue-300 ml-2"}," æŸ¥çœ‹è¯¦æƒ… ",-1))])])):P("",!0),a("div",Do,[o[22]||(o[22]=a("h2",{class:"text-xl font-semibold text-white mb-4"},"ç³»ç»ŸçŠ¶æ€",-1)),a("div",Mo,[a("div",qo,[o[19]||(o[19]=a("span",{class:"text-gray-300"},"ç³»ç»Ÿç®¡ç†å‘˜",-1)),a("span",Ko,E((Ie=(Ae=ae(n))==null?void 0:Ae.status)==null?void 0:Ie.username),1)]),a("div",Jo,[o[20]||(o[20]=a("span",{class:"text-gray-300"},"å½“å‰ç”¨æˆ·",-1)),a("span",Go,E(v.value?(He=ae(n).user)==null?void 0:He.username:"æœªç™»å½•"),1)]),a("div",_o,[o[21]||(o[21]=a("span",{class:"text-gray-300"},"ç¬”è®°æ€»æ•°",-1)),a("span",Yo,E((Pe=(Le=ae(n))==null?void 0:Le.status)==null?void 0:Pe.total_messages)+" æ¡",1)])])]),v.value?(f(),m("div",Qo,[o[31]||(o[31]=a("h2",{class:"text-xl font-semibold text-white mb-4"},"ç”¨æˆ·ä¿¡æ¯é…ç½®",-1)),a("div",Xo,[a("div",Zo,[a("div",es,[o[23]||(o[23]=a("span",{class:"text-gray-300"},"ç”¨æˆ·å",-1)),r(u,{size:"sm",onClick:o[0]||(o[0]=T=>N.username=!N.username),color:N.username?"gray":"primary",variant:"soft"},{default:b(()=>[w(E(N.username?"å–æ¶ˆ":"ç¼–è¾‘"),1)]),_:1},8,["color"])]),N.username?(f(),m("div",ts,[r(j,{modelValue:H.username,"onUpdate:modelValue":o[1]||(o[1]=T=>H.username=T),placeholder:"æ–°ç”¨æˆ·å",class:"w-full mb-2"},null,8,["modelValue"]),a("div",os,[r(u,{onClick:se,color:"primary"},{default:b(()=>o[24]||(o[24]=[w(" ä¿å­˜ ")])),_:1})])])):(f(),m("div",ss,[a("p",as,E((Re=ae(n).user)==null?void 0:Re.username),1)]))]),a("div",rs,[a("div",ns,[o[26]||(o[26]=a("span",{class:"text-gray-300"},"API Token",-1)),r(u,{size:"sm",onClick:p,color:"primary",variant:"soft"},{default:b(()=>o[25]||(o[25]=[w(" é‡æ–°ç”Ÿæˆ ")])),_:1})]),$.value?(f(),m("div",ls,[a("div",is,[r(j,{modelValue:$.value,"onUpdate:modelValue":o[2]||(o[2]=T=>$.value=T),readonly:"",class:"font-mono text-sm"},null,8,["modelValue"]),r(u,{icon:"i-heroicons-clipboard",color:"gray",variant:"ghost",onClick:t})]),o[27]||(o[27]=a("p",{class:"text-xs text-gray-400 mt-1"},"è¯·å¦¥å–„ä¿ç®¡æ­¤ Tokenï¼Œå®ƒç”¨äº API è®¿é—®è®¤è¯",-1))])):(f(),m("div",ds,o[28]||(o[28]=[a("p",{class:"text-gray-400"},"æš‚æ—  Token",-1)])))]),a("div",us,[a("div",cs,[o[29]||(o[29]=a("span",{class:"text-gray-300"},"ä¿®æ”¹å¯†ç ",-1)),r(u,{size:"sm",onClick:o[3]||(o[3]=T=>N.password=!N.password),color:N.password?"gray":"primary",variant:"soft"},{default:b(()=>[w(E(N.password?"å–æ¶ˆ":"ç¼–è¾‘"),1)]),_:1},8,["color"])]),N.password?(f(),m("div",ps,[r(j,{modelValue:H.oldPassword,"onUpdate:modelValue":o[4]||(o[4]=T=>H.oldPassword=T),type:"password",placeholder:"å½“å‰å¯†ç ",class:"w-full mb-2"},null,8,["modelValue"]),r(j,{modelValue:H.newPassword,"onUpdate:modelValue":o[5]||(o[5]=T=>H.newPassword=T),type:"password",placeholder:"æ–°å¯†ç ",class:"w-full mb-2"},null,8,["modelValue"]),a("div",fs,[r(u,{onClick:he,color:"primary"},{default:b(()=>o[30]||(o[30]=[w(" ä¿å­˜ ")])),_:1})])])):P("",!0)])])])):P("",!0),S.value?(f(),m("div",ms,[o[38]||(o[38]=a("div",{class:"flex justify-between items-center mb-4"},[a("h2",{class:"text-xl font-semibold text-white"},"ç½‘ç«™é…ç½®")],-1)),a("div",gs,[o[33]||(o[33]=a("span",{class:"text-white"},"æ–°ç”¨æˆ·æ³¨å†Œ",-1)),a("div",ws,[a("div",vs,[r(M,{modelValue:d.value,"onUpdate:modelValue":o[6]||(o[6]=T=>d.value=T),value:!0,class:"mr-2"},null,8,["modelValue"]),a("span",{class:O(d.value?"text-white":"text-gray-400")},"å…è®¸",2)]),a("div",bs,[r(M,{modelValue:d.value,"onUpdate:modelValue":o[7]||(o[7]=T=>d.value=T),value:!1,class:"mr-2"},null,8,["modelValue"]),a("span",{class:O(d.value?"text-gray-400":"text-white")},"ä¸å…è®¸",2)]),r(u,{color:"green",onClick:s},{default:b(()=>o[32]||(o[32]=[w("ä¿å­˜")])),_:1})])]),a("div",ys,[(f(),m(W,null,ue(fe,(T,B)=>a("div",{key:B,class:"bg-gray-800 rounded p-3"},[a("div",hs,[a("span",ks,E(T),1),r(u,{size:"sm",onClick:J=>Q[B]=!Q[B],color:Q[B]?"gray":"primary",variant:"soft"},{default:b(()=>[w(E(Q[B]?"å–æ¶ˆ":"ç¼–è¾‘"),1)]),_:2},1032,["onClick","color"])]),Q[B]?(f(),m("div",$s,[B==="backgrounds"?(f(),m("div",Ss,[(f(!0),m(W,null,ue(I.backgrounds,(J,le)=>(f(),m("div",{key:le,class:"flex gap-2"},[r(j,{modelValue:I.backgrounds[le],"onUpdate:modelValue":$e=>I.backgrounds[le]=$e,placeholder:"è¾“å…¥å›¾ç‰‡URL",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),r(u,{onClick:$e=>_e(le),icon:"i-heroicons-trash",color:"red",variant:"ghost"},null,8,["onClick"])]))),128)),a("div",Cs,[r(u,{onClick:Ge,icon:"i-heroicons-plus",variant:"ghost",class:"mr-2"},{default:b(()=>o[34]||(o[34]=[w(" æ·»åŠ é“¾æ¥ ")])),_:1}),r(u,{onClick:Ye,icon:"i-heroicons-cloud-arrow-up",variant:"ghost"},{default:b(()=>o[35]||(o[35]=[w(" ä¸Šä¼ å›¾ç‰‡ ")])),_:1})])])):B==="subtitleText"?(f(),be(Z,{key:1,modelValue:I[B],"onUpdate:modelValue":J=>I[B]=J,placeholder:`è¾“å…¥${T}`,class:"w-full mb-2"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(f(),be(j,{key:2,modelValue:I[B],"onUpdate:modelValue":J=>I[B]=J,placeholder:`è¾“å…¥${T}`,class:"w-full mb-2"},null,8,["modelValue","onUpdate:modelValue","placeholder"])),a("div",Vs,[r(u,{onClick:J=>A(B),variant:"ghost",color:"gray"},{default:b(()=>o[36]||(o[36]=[w(" é‡ç½® ")])),_:2},1032,["onClick"]),r(u,{onClick:J=>te(B),color:"primary"},{default:b(()=>o[37]||(o[37]=[w(" ä¿å­˜ ")])),_:2},1032,["onClick"])])])):(f(),m("div",Us,[B==="backgrounds"?(f(),m("div",Ts,[(f(!0),m(W,null,ue(I.backgrounds,(J,le)=>(f(),m("img",{key:le,src:J,class:"w-full h-20 object-cover rounded cursor-pointer",onClick:$e=>Qe(J)},null,8,js))),128))])):(f(),m("p",Es,E(I[B]),1))]))])),64))])])):P("",!0),l.value?(f(),m("div",As,[r(u,{onClick:Je,variant:"ghost",color:"gray"},{default:b(()=>o[39]||(o[39]=[w(" é‡ç½® ")])),_:1}),r(u,{onClick:c.saveConfig,color:"primary"},{default:b(()=>o[40]||(o[40]=[w(" ä¿å­˜æ‰€æœ‰æ›´æ”¹ ")])),_:1},8,["onClick"])])):P("",!0),S.value?(f(),be(Oo,{key:4,config:ae(z),"onUpdate:config":o[8]||(o[8]=T=>pt(z)?z.value=T:z=T),immediate:!0},null,8,["config"])):P("",!0),S.value?(f(),m("div",Is,[o[44]||(o[44]=a("h2",{class:"text-xl font-semibold text-white mb-4"},"æ•°æ®åº“ç®¡ç†",-1)),a("div",Hs,[a("div",Ls,[r(u,{color:"primary",icon:"i-heroicons-arrow-down-tray",onClick:Xe},{default:b(()=>o[41]||(o[41]=[w(" ä¸‹è½½å¤‡ä»½ ")])),_:1}),r(u,{color:"warning",icon:"i-heroicons-arrow-up-tray",onClick:Ze},{default:b(()=>o[42]||(o[42]=[w(" æ¢å¤æ•°æ®åº“ ")])),_:1})]),o[43]||(o[43]=a("div",{class:"text-yellow-400 text-sm max-h-16 overflow-y-auto bg-gray-800/50 rounded p-2"}," ğŸ””ï¼šSQLiteä¸€é”®å¤‡ä»½æ¢å¤ï¼Œå› å…¼å®¹é—®é¢˜ï¼Œå¦‚æœä½ åœ¨ä½¿ç”¨äº‘ç«¯çš„PostgreSQL/MySQLæ•°æ®åº“ï¼Œå¯ä»¥å°è¯•ï¼Œä½†æœ€å¥½å‰å¾€äº‘æœåŠ¡ç«¯æ¥å¤‡ä»½å’Œæ¢å¤ ",-1)),a("input",{type:"file",ref_key:"databaseFileInput",ref:ge,accept:".zip",class:"hidden",onChange:tt},null,544)])])):P("",!0),a("div",Ps,[r(u,{icon:"i-heroicons-arrow-left",variant:"ghost",color:"white",onClick:o[9]||(o[9]=T=>c.$router.push("/")),class:"text-white hover:text-black"},{default:b(()=>o[45]||(o[45]=[w(" è¿”å›é¦–é¡µ ")])),_:1}),v.value?(f(),m("div",Rs,[r(u,{icon:"i-heroicons-power",color:"red",variant:"ghost",onClick:U},{default:b(()=>o[46]||(o[46]=[w(" é€€å‡ºç™»å½• ")])),_:1})])):(f(),m("div",Os,[r(u,{color:"primary",onClick:o[10]||(o[10]=T=>{F.value=!0,x.value=!0})},{default:b(()=>o[47]||(o[47]=[w(" ç™»å½• ")])),_:1}),r(u,{color:"secondary",onClick:o[11]||(o[11]=T=>{F.value=!0,x.value=!1})},{default:b(()=>o[48]||(o[48]=[w(" æ³¨å†Œ ")])),_:1})]))])])])]),r(ot,{modelValue:F.value,"onUpdate:modelValue":o[16]||(o[16]=T=>F.value=T)},{default:b(()=>[a("div",zs,[a("h3",Ns,E(x.value?"ç”¨æˆ·ç™»å½•":"ç”¨æˆ·æ³¨å†Œ"),1),r(ke,{state:Y,class:"space-y-4"},{default:b(()=>[r(we,null,{default:b(()=>[r(j,{modelValue:Y.username,"onUpdate:modelValue":o[12]||(o[12]=T=>Y.username=T),placeholder:"ç”¨æˆ·å",class:"w-full"},null,8,["modelValue"])]),_:1}),r(we,null,{default:b(()=>[r(j,{modelValue:Y.password,"onUpdate:modelValue":o[13]||(o[13]=T=>Y.password=T),type:"password",placeholder:"å¯†ç ",class:"w-full"},null,8,["modelValue"])]),_:1}),a("div",xs,[r(u,{variant:"ghost",onClick:o[14]||(o[14]=T=>x.value=!x.value)},{default:b(()=>[w(E(x.value?"å»æ³¨å†Œ":"å»ç™»å½•"),1)]),_:1}),r(u,{color:"primary",onClick:o[15]||(o[15]=T=>x.value?ae(y)(Y):ae(h)(Y))},{default:b(()=>[w(E(x.value?"ç™»å½•":"æ³¨å†Œ"),1)]),_:1})])]),_:1},8,["state"])])]),_:1},8,["modelValue"]),a("input",{type:"file",ref_key:"fileInput",ref:K,accept:"image/*",multiple:"",class:"hidden",onChange:Ke},null,544)],64)}}}),Fs=pe(Bs,[["__scopeId","data-v-17e8f185"]]),Ms=ne({__name:"status",setup(e){const i=()=>{C().add({title:"æ¢å¤æˆåŠŸ",description:"æ•°æ®å·²æ¢å¤ï¼Œé¡µé¢å³å°†åˆ·æ–°",color:"green",timeout:2e3}),setTimeout(()=>{window.location.reload()},2e3)};return(d,g)=>{const s=ft,n=wt;return f(),be(n,null,{default:b(()=>[r(s,{class:"flex justify-center items-center h-screen"},{default:b(()=>[r(Fs,{onRestoreSuccess:i})]),_:1}),r(vt)]),_:1})}}});export{Ms as default};
